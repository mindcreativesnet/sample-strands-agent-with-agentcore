Strands Agent Chatbot with AgentCore - Project Structure
=========================================================

Root Directory
├── README.md                    # Main project documentation
├── DEPLOYMENT.md                # Deployment guide (./deploy.sh focused)
├── AGENTCORE.md                 # AgentCore integration guide
├── CONTRIBUTING.md              # Contribution guidelines
├── CODE_OF_CONDUCT.md           # Code of conduct
├── LICENSE                      # MIT license
├── .gitignore                   # Git ignore rules
├── PROJECT_STRUCTURE.txt        # This file - project structure overview
└── docs/                        # Documentation and guides
    ├── images/                  # Documentation images and GIFs
    └── guides/                  # Developer guides
        ├── TROUBLESHOOTING.md   # Troubleshooting guide
        ├── EMBEDDING_GUIDE.md   # Iframe embedding guide
        └── Add_New_Serverless_MCP.md # Guide for adding MCP servers

Main Application (chatbot-app/)
├── start.sh                     # Local development startup script
├── setup.sh                     # Local environment setup script
│
├── frontend/                    # Next.js (Frontend + BFF)
│   ├── src/
│   │   ├── app/
│   │   │   ├── api/            # API routes (BFF layer)
│   │   │   │   ├── stream/chat/ # Chat streaming endpoint
│   │   │   │   ├── conversation/ # Conversation management
│   │   │   │   └── gateway-tools/ # Gateway tool endpoints
│   │   │   ├── embed/          # Iframe embedding page
│   │   │   └── page.tsx        # Main chat interface
│   │   ├── components/         # React components
│   │   │   ├── ChatInterface.tsx
│   │   │   ├── ToolSidebar.tsx
│   │   │   └── ModelConfig.tsx
│   │   ├── config/
│   │   │   └── tools-config.json # Tool configuration
│   │   ├── hooks/              # Custom React hooks
│   │   ├── lib/                # Utility libraries
│   │   │   ├── agentcore-runtime-client.ts # AgentCore client
│   │   │   ├── auth-utils.ts   # Cognito authentication
│   │   │   └── chat-hooks.ts   # Chat hooks
│   │   └── types/              # TypeScript types
│   ├── public/                 # Static assets
│   ├── package.json            # Frontend dependencies
│   ├── tailwind.config.js      # Tailwind CSS config
│   └── Dockerfile              # Frontend container config
│
└── agentcore/                   # AgentCore Runtime
    ├── src/
    │   ├── main.py             # FastAPI entry point
    │   ├── agent/              # Agent implementation
    │   │   ├── agent.py        # ChatbotAgent with AgentCore Memory
    │   │   ├── turn_based_session_manager.py # Session optimization
    │   │   ├── gateway_mcp_client.py # Gateway integration
    │   │   └── gateway_auth.py # Gateway authentication
    │   ├── local_tools/        # Local tools (embedded in runtime)
    │   │   ├── weather.py      # Weather lookup
    │   │   ├── visualization.py # Chart generation
    │   │   ├── web_search.py   # DuckDuckGo search
    │   │   └── url_fetcher.py  # Web content extraction
    │   ├── builtin_tools/      # AWS Bedrock built-in tools
    │   │   └── code_interpreter_diagram_tool.py # Code Interpreter
    │   ├── routers/            # FastAPI routers
    │   │   ├── chat.py         # Chat streaming
    │   │   ├── gateway_tools.py # Gateway tool management
    │   │   ├── tools.py        # Tool configuration
    │   │   └── health.py       # Health check
    │   └── streaming/          # Event processing
    │       ├── event_processor.py
    │       └── event_formatter.py
    ├── requirements.txt        # Python dependencies
    └── Dockerfile              # AgentCore Runtime container

Infrastructure & Deployment (agent-blueprint/)
├── deploy.sh                   # Master deployment script
├── destroy.sh                  # Master cleanup script
├── .env                        # Global environment variables
├── .env.example                # Environment template
├── requirements.txt            # Infrastructure dependencies
│
├── chatbot-deployment/         # Main Application Stack
│   └── infrastructure/
│       ├── scripts/
│       │   ├── deploy.sh       # Deploy frontend + runtime
│       │   └── destroy.sh      # Cleanup frontend + runtime
│       ├── lib/
│       │   └── chatbot-stack.ts # CDK stack (Frontend, Cognito, ALB)
│       ├── package.json        # CDK dependencies
│       └── cdk.json            # CDK configuration
│
├── agentcore-runtime-stack/    # AgentCore Runtime Stack
│   ├── bin/
│   │   └── agentcore-runtime-stack.ts # CDK app entry
│   ├── lib/
│   │   └── agent-runtime-stack.ts # Runtime + Memory deployment
│   ├── package.json            # CDK dependencies
│   └── cdk.json                # CDK configuration
│
├── agentcore-gateway-stack/    # AgentCore Gateway Stack
│   ├── scripts/
│   │   ├── deploy.sh           # Deploy gateway + Lambda tools
│   │   ├── destroy.sh          # Cleanup gateway + Lambda tools
│   │   ├── build-lambdas.sh    # Build Lambda packages
│   │   └── test-gateway.sh     # Test gateway connection
│   ├── infrastructure/
│   │   ├── bin/
│   │   │   └── gateway-stack.ts # CDK app entry
│   │   └── lib/
│   │       ├── iam-stack.ts    # IAM roles and secrets
│   │       ├── gateway-stack.ts # Gateway deployment
│   │       ├── lambda-stack.ts # Lambda functions
│   │       └── gateway-target-stack.ts # Gateway targets
│   ├── lambda-functions/       # Lambda function source
│   │   ├── wikipedia/          # Wikipedia tools (2 tools)
│   │   ├── arxiv/              # ArXiv tools (2 tools)
│   │   ├── google-search/      # Google Search tools (2 tools)
│   │   ├── tavily/             # Tavily tools (2 tools)
│   │   └── finance/            # Finance tools (4 tools)
│   └── README.md               # Gateway documentation
│
└── agentcore-runtime-a2a-stack/ # Runtime-to-Runtime (A2A)
    └── report-writer/          # Report Writer Runtime (Optional)
        ├── deploy.sh           # Deploy report writer
        ├── destroy.sh          # Cleanup report writer
        ├── src/                # Report writer source
        │   └── main.py         # Report writer agent
        └── cdk/                # CDK deployment
            └── stacks/
                └── report_writer_agentcore_stack.py

Deployment Script Hierarchy
============================

Master Scripts (agent-blueprint/):
├── deploy.sh                   # Deploys all components
└── destroy.sh                  # Destroys all components

Component Scripts:
├── chatbot-deployment/infrastructure/scripts/deploy.sh  # Frontend + Runtime
├── agentcore-gateway-stack/scripts/deploy.sh            # Gateway + Lambda
└── agentcore-runtime-a2a-stack/report-writer/deploy.sh  # Report Writer (optional)

Deployment Strategy
===================

1. Quick Deployment (Recommended):
   cd agent-blueprint
   ./deploy.sh

   This deploys:
   - Frontend + BFF (Fargate)
   - AgentCore Runtime with Memory
   - AgentCore Gateway + Lambda tools
   - Report Writer Runtime (optional, A2A)

2. Individual Component Deployment:
   cd agent-blueprint
   ./deploy.sh --frontend      # Frontend + BFF only
   ./deploy.sh --runtime       # AgentCore Runtime only
   ./deploy.sh --gateway       # Gateway + Lambda tools only
   ./deploy.sh --report-writer # Report Writer only

3. Cleanup:
   cd agent-blueprint
   ./destroy.sh                # Remove all components
   ./destroy.sh --frontend     # Remove specific component

Local Development
=================

Start local environment:
cd chatbot-app
./setup.sh    # First time setup
./start.sh    # Start services

Services:
- Frontend: http://localhost:3000
- AgentCore Runtime: http://localhost:8080
- API Docs: http://localhost:8080/docs

Note: Local mode runs AgentCore Runtime locally but still uses AWS Bedrock API.

Key Configuration Files
=======================

├── agent-blueprint/.env               # Global environment (AWS credentials, API keys)
├── agent-blueprint/.env.example       # Environment template
├── chatbot-app/frontend/src/config/tools-config.json # Tool configuration
└── chatbot-app/agentcore/requirements.txt # Python dependencies

AgentCore Components
====================

1. AgentCore Runtime
   - Documentation: https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/agents-tools-runtime.html
   - Containerized Strands Agent execution
   - Local tools embedded in container
   - Uses AgentCore Memory for conversation persistence
   - Integrates with AgentCore Gateway via SigV4
   - Calls Built-in Tools via AWS API
   - Communicates with other Runtimes via A2A protocol

2. AgentCore Memory
   - Documentation: https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/memory.html
   - Cross-session memory retention

3. AgentCore Gateway
   - Documentation: https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/gateway.html
   - Routes to 5 Lambda functions (12 tools total via MCP protocol)

Tool Categories
===============

Local Tools (5 tools) - Embedded in AgentCore Runtime:
├── calculator           # Mathematical computations
├── get_current_weather  # Weather lookup
├── create_visualization # Chart generation
├── ddg_web_search       # DuckDuckGo search
└── fetch_url_content    # Web content extraction

Built-in Tools (1 tool) - AWS Bedrock Code Interpreter:
└── generate_diagram_and_validate # Diagram and chart generation

Gateway Tools (12 tools via 5 Lambdas):
├── Wikipedia (2)        # wikipedia_search, wikipedia_get_article
├── ArXiv (2)            # arxiv_search, arxiv_get_paper
├── Google Search (2)    # google_web_search, google_image_search
├── Tavily (2)           # tavily_search, tavily_extract
└── Finance (4)          # stock_quote, stock_history, financial_news, stock_analysis

Runtime Tools (9 tools via 1 Runtime) - Optional A2A:
└── Report Writer (9)    # Report creation, chart generation, DOCX export

Dependencies Between Components
===============================

1. Frontend + BFF (Fargate) → Creates VPC and core infrastructure
2. AgentCore Runtime → Uses Memory, Gateway, Built-in Tools
3. AgentCore Memory → Conversation persistence for Runtime
4. AgentCore Gateway → Routes Runtime requests to Lambda functions
5. Report Writer Runtime → Optional, communicates with main Runtime via A2A

Testing
=======

Test scripts:
├── tests/test-simple.sh          # Basic functionality test
├── tests/test-gateway.sh         # Gateway connection test
└── tests/test-gateway-simple.py  # Gateway tools test

Documentation References
========================

For more details, see:
- README.md: Architecture overview and features
- DEPLOYMENT.md: Step-by-step deployment guide
- AGENTCORE.md: AgentCore integration details
